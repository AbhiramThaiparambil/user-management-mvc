<%-include("../header")%>
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <h1 class="text-center">Admin user edit  user</h1>
            <form action="/editedData"  method="post" id="editForm">
                <div class="mb-3">
                    
                    <div id="nameError"></div>
                    <label for="name" class="form-label">Name</label>
                    <input type="text" class="form-control" id="name" onkeyup="validateName()"  value="<%=userData.name%>"    name="updatedname" >
                </div>
                <div class="mb-3">
                    <div id="emailError"></div>
                    <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="email" onkeyup="validateEmail()"  value="<%=userData.email%>" required name="updatedemail">
                </div>
                <div class="mb-3">
                    <div id="passwordError"></div>
                    <label for="password" class="form-label">Password</label>
                    <input type="password" class="form-control" id="password"   value="<%=userData.email%>"  name="updatepassword">
                </div>
                
                

                <input class="form-check-input " type="checkbox" value="1"  name="admin" id="flexCheckDefault">
               <label class="form-check-label" for="flexCheckDefault">
                   Admin
                   </label>
                
                   <input type="text" hidden  value="<%=userData._id%>" name="id">
               
                <button type="submit" class="btn btn-success w-100">Add user</button>
            </form>
        </div>
    </div>
</div>
<script>
    function validateEmail() {
        const email = document.getElementById('email').value;
        const error = document.getElementById('emailError');
        const EMAIL_REGEX = /^[^\s@]+@gmail\.com$/i;

        if (!EMAIL_REGEX.test(email)) {
            error.innerHTML = 'enter a valid email';
            error.style.color = 'red';
            error.style.backgroundColor ='black';
            
            return false;
        } else {
            error.innerHTML = 'valid';
            error.style.color = 'green';
            return true;
        }
    }

    function validatePassword() {
        const password = document.getElementById('password').value;
        const error = document.getElementById('passwordError');
        const PASSWORD_REGEX = /^[\w\d]{6,}$/;

        if (!PASSWORD_REGEX.test(password)) {
            error.innerHTML = 'Password must be at least 6 characters';
            error.style.color = 'red';
            error.style.backgroundColor ='black';
            return false;
        } else {
            error.innerHTML = 'Valid';
            error.style.color = 'green';
            return true;
        }
    }
   
    function validateName() {
        const name = document.getElementById('name').value;
        const error = document.getElementById('nameError');
        const NAME_REGEX = /^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/;

        if (!NAME_REGEX.test(name)) {
            error.innerHTML = 'No valid name';
            error.style.color = 'red';
            error.style.backgroundColor ='black';
            return false;
        } else {
            error.innerHTML = 'valid name';
            error.style.color = 'green';
            return true;
        }
    }

    document.getElementById('editForm').addEventListener('submit', function(e) {
        if (!validateName() || !validateEmail()) {
            e.preventDefault();
            alert('Details are incorrect');
        }
    });
</script>

<%-include("../footer")%>